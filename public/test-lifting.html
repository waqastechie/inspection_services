<!DOCTYPE html>
<html>
<head>
    <title>Test Lifting Examination</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>Test Lifting Examination Conditional Display</h2>
        
        <!-- Question A -->
        <div class="mb-4">
            <label class="form-label fw-bold">A. Is this the first examination?</label>
            <div class="d-flex gap-4 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="first_examination" id="firstExamYes" value="yes">
                    <label class="form-check-label" for="firstExamYes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="first_examination" id="firstExamNo" value="no">
                    <label class="form-check-label" for="firstExamNo">No</label>
                </div>
            </div>
            
            <!-- Conditional follow-up -->
            <div id="equipmentInstallationQuestion" style="display: none; background: yellow; padding: 10px;">
                <strong>Equipment installation details section (should show when Yes is selected)</strong>
                <textarea class="form-control mt-2" name="equipment_installation_details" rows="3"></textarea>
            </div>
        </div>

        <!-- Question C -->
        <div class="mb-4">
            <label class="form-label fw-bold">C. Does equipment have defect?</label>
            <div class="d-flex gap-4 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="equipment_defect" id="defectYes" value="yes">
                    <label class="form-check-label" for="defectYes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="equipment_defect" id="defectNo" value="no">
                    <label class="form-check-label" for="defectNo">No</label>
                </div>
            </div>
            
            <!-- Conditional defect details -->
            <div id="defectDetailsSection" style="display: none; background: orange; padding: 10px;">
                <strong>Defect details section (should show when Yes is selected)</strong>
                <textarea class="form-control mt-2" name="defect_description" rows="3"></textarea>
            </div>
        </div>
    </div>

    <script>
        console.log('ðŸš€ Test page loading...');
        
        // Simple direct approach
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up listeners...');
            
            // Question A
            const firstExamRadios = document.querySelectorAll('input[name="first_examination"]');
            const equipmentInstallationQuestion = document.getElementById('equipmentInstallationQuestion');
            
            console.log('Found Question A radios:', firstExamRadios.length);
            console.log('Found equipment installation section:', equipmentInstallationQuestion);
            
            firstExamRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    console.log('Question A changed:', this.value, this.checked);
                    alert('Question A clicked: ' + this.value + ' - Checked: ' + this.checked);
                    
                    if (this.value === 'yes' && this.checked) {
                        equipmentInstallationQuestion.style.display = 'block';
                        console.log('Showing equipment installation question');
                    } else if (this.value === 'no' && this.checked) {
                        equipmentInstallationQuestion.style.display = 'none';
                        console.log('Hiding equipment installation question');
                    }
                });
            });
            
            // Question C
            const equipmentDefectRadios = document.querySelectorAll('input[name="equipment_defect"]');
            const defectDetailsSection = document.getElementById('defectDetailsSection');
            
            console.log('Found Question C radios:', equipmentDefectRadios.length);
            console.log('Found defect details section:', defectDetailsSection);
            
            equipmentDefectRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    console.log('Question C changed:', this.value, this.checked);
                    alert('Question C clicked: ' + this.value + ' - Checked: ' + this.checked);
                    
                    if (this.value === 'yes' && this.checked) {
                        defectDetailsSection.style.display = 'block';
                        console.log('Showing defect details section');
                    } else if (this.value === 'no' && this.checked) {
                        defectDetailsSection.style.display = 'none';
                        console.log('Hiding defect details section');
                    }
                });
            });
            
            console.log('All listeners set up!');
        });
    </script>
</body>
</html>